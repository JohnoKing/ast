info mam static 00000 1994-07-17 make (AT&T Research) 5.7 2012-06-20
note *
note * This build file is in the Make Abstract Machine (MAM) language. It was
note * first generated by nmake, but in the ksh 93u+m distribution we maintain
note * it manually because nmake had too many problems to keep using. The
note * Mamfiles are processed by mamake (src/cmd/INIT/mamake.c); we added
note * support for indentation to improve readability. The language is
note * documented in Glenn Fowler's paper "A Make Abstract Machine":
note * http://web.archive.org/web/20041227143022/http://www2.research.att.com/~gsf/mam/mam.html
note *
setv INSTALLROOT ../../..
setv PACKAGE_ast_INCLUDE ${INSTALLROOT}/include/ast
setv PACKAGE_cmd ${INSTALLROOT}
setv PACKAGEROOT ../../../../..
setv CC cc
setv mam_cc_FLAGS
setv KSH_RELFLAGS
setv CCFLAGS ${-debug-symbols?1?${mam_cc_DEBUG} -D_BLD_DEBUG?${mam_cc_OPTIMIZE}?}
setv CCLDFLAGS ${-strip-symbols?1?${mam_cc_LD_STRIP}??}
setv IFFEFLAGS
setv LDFLAGS
make .INIT
	make ${PACKAGE_ast_INCLUDE}/cmdlist.h
	done ${PACKAGE_ast_INCLUDE}/cmdlist.h
	exec - sed -e '/^CMDLIST(.*)$/!d' -e 's/CMDLIST(\(.*\))/\1/' -e '/^getconf$/d' -e '/^ln$/d' -e '/^mv$/d' -e '/^md5sum$/d' -e '/^sum$/d' ${PACKAGE_ast_INCLUDE}/cmdlist.h
	bind -lcmd
done .INIT dontcare virtual
make install
	make ${PACKAGE_ast_INCLUDE}/ast_time.h implicit
	done ${PACKAGE_ast_INCLUDE}/ast_time.h
	prev ${PACKAGE_ast_INCLUDE}/vmalloc.h implicit
	prev ${PACKAGE_ast_INCLUDE}/regex.h implicit
	make ${PACKAGE_ast_INCLUDE}/proc.h implicit
		prev ${PACKAGE_ast_INCLUDE}/ast.h implicit
	done ${PACKAGE_ast_INCLUDE}/proc.h
	prev ${PACKAGE_ast_INCLUDE}/error.h implicit
	prev ${PACKAGE_ast_INCLUDE}/cmd.h implicit
	make fontkey.h implicit
	done fontkey.h
	make lpd.h implicit
	done lpd.h
	make pd.h implicit
	done pd.h
	make sysv.h implicit
	done sysv.h
	make banner
		make banner.o
			make banner.c
				prev ${PACKAGE_ast_INCLUDE}/cmd.h implicit
				prev fontkey.h implicit
				prev lpd.h implicit
				prev pd.h implicit
				prev sysv.h implicit
			done banner.c
			meta banner.o %.c>%.o banner.c banner
			prev banner.c
			exec - ${CC} ${mam_cc_FLAGS} ${KSH_REFLAGS} ${CCFLAGS} -I${PACKAGE_ast_INCLUDE} -DERROR_CATALOG=\""builtin"\" -D_PACKAGE_ast -DCMD_STANDALONE=b_banner -c banner.c
		done banner.o generated
		bind -last
		exec - ${CC} ${CCLDFLAGS} ${mam_cc_FLAGS} ${KSH_REFLAGS} ${CCFLAGS} ${LDFLAGS} -lm ${mam_cc_L+-L.} ${mam_cc_L+-L${INSTALLROOT}/lib} -o banner banner.o ${mam_libast} ${man_libcmd}
	done banner generated
	make ${INSTALLROOT}/bin
		exec - if silent test ! -d ${INSTALLROOT}/bin
		exec - then mkdir -p ${INSTALLROOT}/bin
		exec - fi
	done ${INSTALLROOT}/bin generated
	make ${INSTALLROOT}/bin/banner
		prev banner
		exec - test '' = 'banner' || ${STDCMP} 2>/dev/null -s banner ${INSTALLROOT}/bin/banner || { ${STDMV} ${INSTALLROOT}/bin/banner ${INSTALLROOT}/bin/banner.old 2>/dev/null || true; ${STDCP} banner ${INSTALLROOT}/bin/banner;}
	done ${INSTALLROOT}/bin/banner generated
done install virtual
